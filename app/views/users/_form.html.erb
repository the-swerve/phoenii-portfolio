<% if User::ROLES.include? params[:role] %>
  <% role = params[:role] %>
<% elsif current_user && User::ROLES.include?(current_user.role) %>
  <% role = current_user.role %>
<% end %>

<% if role %>

  <% if role == "Investor" %>
    <h2>Role: Investor</h2>
  <% elsif role == "Entrepeneur" %>
    <h2>Role: Entrepeneur</h2>
  <% end %>

  <%= form_for @user do |f| %>
    <%= render :partial => 'layouts/form_errors', :locals => {:object => @user} %>

    <div class="field">
      <%= f.label :email %><br />
      <%= f.text_field :email %>
    </div>
    <div class="field">
      <%= f.label :password %><br />
      <%= f.password_field :password %>
    </div>
    <div class="field">
      <%= f.label "Confirm Your Password" %><br />
      <%= f.password_field :password_confirmation %>
    </div>
    <div class="field">
      <%= f.label :name %><br />
      <%= f.text_field :name %>
    </div>
    <div class="field">
      <%= f.label "Your bio" %><br />
      <%= f.text_area :bio %>
    </div>

    <%= f.hidden_field :role, :value => params[:role] %>

    <div class="actions">
      <%= f.submit %>
    </div>
  <% end %>

  <p>You must have a role selected. <%= link_to "Return home.", root_url %></p>

<% end %>
